# SDK Zip Release Guide

## 📦 How SDK Zip Files Are Handled

### Overview

The PLHub release automation creates SDK zip packages but **does NOT commit them to Git**. Instead, they are:

1. ✅ Created locally during release
2. ✅ Checksum file (`.sha256`) is committed to Git
3. ✅ Zip file is uploaded as a **GitHub Release Asset**

### Why Not Commit Zip Files?

**Large binary files don't belong in Git repositories:**
- ❌ Bloats repository size
- ❌ Slows down clones
- ❌ Makes diffs impossible
- ❌ Wastes bandwidth

**Better approach - GitHub Release Assets:**
- ✅ Optimized for binary files
- ✅ Fast downloads
- ✅ Doesn't bloat repository
- ✅ Easy to download

---

## 🚀 Automated Release Process

### What Gets Committed to Git

```bash
✅ Version files (setup.py, plhub.py, etc.)
✅ Documentation (CHANGELOG.md, RELEASE_NOTES.md)
✅ Checksum files (*.zip.sha256)
❌ SDK zip files (*.zip) - EXCLUDED by .gitignore
❌ Build artifacts (dist/, build/, *.whl)
```

### What Gets Uploaded to GitHub Release

```bash
✅ SDK zip file (plhub-sdk-X.Y.Z.zip)
✅ Source code (auto-generated by GitHub)
✅ Checksum file (optional, for verification)
```

---

## 🔧 How It Works

### During Release Automation

When you run:
```bash
python tools/release_automation.py --bump patch
```

**The automation does this:**

1. **Update versions** ✅
   - Updates all version strings
   - Updates CHANGELOG
   - Generates RELEASE_NOTES.md

2. **Create SDK package** ✅
   ```
   plhub-sdk-0.5.1.zip          (9.16 MB) - Created locally
   plhub-sdk-0.5.1.zip.sha256   (87 bytes) - Committed to Git
   ```

3. **Git operations** ✅
   ```bash
   git add .                    # Adds everything except *.zip (in .gitignore)
   git commit -m "Release vX.Y.Z"
   git tag -a vX.Y.Z
   git push origin main
   git push origin vX.Y.Z
   ```

4. **Open GitHub release page** ✅
   - Shows you the zip file location
   - Provides full path for easy drag-and-drop
   - Opens browser to release page

---

## 📋 Complete Release Checklist

### Automated Steps (Done by Tool)

- [x] Update version in all files
- [x] Update CHANGELOG.md
- [x] Generate RELEASE_NOTES.md
- [x] Create SDK zip package
- [x] Calculate SHA256 checksum
- [x] Commit checksum file
- [x] Git commit, tag, and push
- [x] Build PyPI distributions (optional)
- [x] Publish to PyPI (optional)
- [x] Open GitHub release page

### Manual Steps (You Do This)

1. **On GitHub Release Page:**
   - [ ] Review pre-filled tag (`v0.5.1`) and title
   - [ ] Copy release notes from `RELEASE_NOTES.md`
   - [ ] Drag and drop `plhub-sdk-X.Y.Z.zip` (shown in console)
   - [ ] Optionally attach `plhub-sdk-X.Y.Z.zip.sha256`
   - [ ] Click "Publish release"

2. **Post-Release:**
   - [ ] Verify release: `https://github.com/AlhaqGH/PLHub/releases/tag/vX.Y.Z`
   - [ ] Test download of SDK zip
   - [ ] Verify PyPI: `https://pypi.org/project/plhub/`
   - [ ] Test: `pip install --upgrade plhub==X.Y.Z`

---

## 🎯 Improved GitHub Release Instructions

The automation now shows:

```
🌐 Creating GitHub release...
  📦 SDK Package: plhub-sdk-0.5.1.zip (9.16 MB)
  📍 Location: C:\Users\habib\POHLANG\PLHub\plhub-sdk-0.5.1.zip
  🌐 Opening GitHub release page: https://...

  ℹ️  Please complete the release on GitHub:
     1. Review the pre-filled tag and title
     2. Copy release notes from RELEASE_NOTES.md
     3. Drag and drop: C:\Users\habib\POHLANG\PLHub\plhub-sdk-0.5.1.zip
        (or attach plhub-sdk-0.5.1.zip manually)
     4. Optionally attach plhub-sdk-0.5.1.zip.sha256
     5. Click 'Publish release'
```

**Now you know exactly:**
- ✅ Where the zip file is
- ✅ What size it is
- ✅ How to attach it (drag and drop)

---

## 📁 File Locations

After running release automation:

```
PLHub/
├── plhub-sdk-0.5.1.zip              ← Upload to GitHub Release
├── plhub-sdk-0.5.1.zip.sha256       ← Committed to Git ✅
├── dist/
│   ├── plhub-0.5.1.tar.gz          ← Uploaded to PyPI
│   └── plhub-0.5.1-py3-none-any.whl ← Uploaded to PyPI
└── ... (other files committed to Git)
```

---

## 🔍 Verification

### Verify Checksum is Committed

```bash
git log --oneline --all -- "*.zip.sha256"
```

### Verify Zip is NOT Committed

```bash
git ls-files "*.zip"
# Should return nothing (empty)
```

### Verify Zip is Ignored

```bash
git status
# Should NOT show *.zip as untracked
```

---

## 🎓 Best Practices

### ✅ DO

- ✅ Commit checksum files (`.sha256`)
- ✅ Upload zip to GitHub Releases
- ✅ Provide download links to releases
- ✅ Keep repository clean

### ❌ DON'T

- ❌ Commit large zip files to Git
- ❌ Commit build artifacts
- ❌ Commit binary files
- ❌ Force-add ignored files

---

## 🚀 Quick Commands

### Create Release with Zip

```bash
# Full automated release
python tools/release_automation.py --bump patch

# This creates the zip and shows you where it is
# Then manually upload to GitHub release page
```

### Just Create Zip (No Release)

```bash
# Use the automation in "skip" mode
python tools/release_automation.py --version 0.5.1 --skip-git --skip-pypi
```

### Verify Zip Integrity

```bash
# On Windows (PowerShell)
(Get-FileHash plhub-sdk-0.5.1.zip -Algorithm SHA256).Hash

# Compare with .sha256 file
Get-Content plhub-sdk-0.5.1.zip.sha256
```

---

## 📖 Summary

**The improved release automation:**

1. ✅ Creates SDK zip locally
2. ✅ Shows exact file location
3. ✅ Commits checksum to Git
4. ✅ Opens release page with instructions
5. ✅ Tells you to drag and drop the zip

**You just need to:**

1. Drag and drop the zip file (path is shown)
2. Click "Publish release"

**That's it! 🎉**

---

## 🔗 Related Files

- `.gitignore` - Excludes `*.zip`, allows `!*.zip.sha256`
- `tools/release_automation.py` - Creates zip and shows location
- `RELEASE_NOTES.md` - Content for GitHub release
- `CHANGELOG.md` - Version history

---

**The zip is now properly integrated into the automated release process!** 🚀
